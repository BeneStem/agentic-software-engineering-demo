<template>
  <div
    :class="[
      'erk_finden__filterwertkachel',
      { 'erk_finden__filterwertkachel--selected': ausgewaehlt },
      'erk_finden__filterwertkachel--' + name,
    ]"
  >
    <label class="erk_finden__filterwertkachel__label" :for="'farbkachel-' + name">
      <span class="erk_finden__filterwertkachel__farbname">{{ lesbarerName }}</span>
      <div class="erk_finden__filterwertkachel__farbkachel">
        <svg height="39" viewBox="0 0 42 39" width="42" xmlns="http://www.w3.org/2000/svg">
          <linearGradient :id="name" gradientUnits="userSpaceOnUse" x1="37.4346" x2="10.5944" y1="2.55772" y2="42.6372">
            <stop
              v-for="c in getFarbdefinition(name)"
              :key="c.stopColor"
              :offset="c.offset"
              :stop-color="c.stopColor"
            />
          </linearGradient>
          <path
            d="m39.5381 36.685c-.0226 0-.0413-.1653-.0626-.2533.0849-.0464.1742-.0843.2666-.1133.0261.097.047.1954.0627.2946-.0841.0393-.1743.0637-.2667.072zm-2.2382-11.4844c-.0267.028-.1093-.0733-.1986-.1413.0566-.1018.126-.1959.2066-.28.032-.024.104.076.1573.1213-.0423.107-.0978.2082-.1653.3013zm-.6012-3.2687-.1773-.1133.0746-.2667c.0574.0414.1333.0614.1627.1334.0173.0466-.0373.1613-.06.2466zm-2.6182-.2453c-.0812-.0676-.1521-.1467-.2106-.2346l.18-.188.1693.2533c-.048.0613-.1107.1866-.1333.1693zm-.2253-5.6962.1773.3199-.0946.1146c-.0493-.1106-.1013-.2159-.144-.3319 0-.012.04-.0666.0613-.1026zm-.6518 7.4918c-.0907.048-.1933.14-.2746.1093-.0814-.0306-.124-.1946-.1787-.3052.0163-.0379.0403-.072.0707-.1.0293-.0213.0666-.0173.1333-.0333.0812.0601.1591.1247.2333.1933.015.0427.02.0883.0146.1333zm-1.1478-1.6903c.2533-.2666.5119-.4692.7905.1626l-.7998.1973c-.0157-.1199-.0157-.2413 0-.3612zm-7.6265-11.6857c-.0134-.072-.0534-.17599-.036-.21199.0306-.06398.0973-.09065.1479-.13331l.0454.2546-.1573.0893zm-.26-5.23768c.0068-.08649.0193-.17243.0374-.25728.0079-.03066.0559-.03866.0853-.05599.0133.08265.0253.16396.0386.24661l-.1626.06666zm-.9065 7.95718c0 .0066-.1493-.0987-.1453-.1214.028-.1786.076-.3506.12-.5332l.2066.1653c-.0573.1653-.1133.3333-.1799.4906zm-2.7808.8318c-.0173-.0827-.0626-.196-.0426-.244.0293-.0706.1053-.0946.1613-.1333.0173.0933.0333.1867.0506.2813l-.1693.1013zm-.6118-6.54275c-.0227.03332-.108-.03466-.164-.05466.0337-.13231.0783-.2616.1333-.38658.0173-.032.1093.03066.1986.06132-.0451.13137-.1018.25849-.1693.37992zm-.7906 1.53304c-.0078-.08864-.0109-.17763-.0093-.26661 0-.01466.0587-.02267.0907-.03334 0 .09065.0093.18398 0 .27463 0 .00933-.0574.01333-.0867.01999zm-.9584 2.21421-.252-.2573.2453-.3999c.0613.1.168.1973.172.3013s-.096.2186-.1653.3599zm-.8132 1.5797c-.0613-.0253-.0973-.1959-.144-.3026.0733-.068.152-.1999.2186-.1866.0667.0133.116.1773.2027.3252-.1227.0787-.212.1894-.2773.1627zm-.4333-3.01407c.0294-.28528.2333-.4999.3386-.38792.0523.10925.0899.22489.112.34394l-.3306.3826c-.0426-.11331-.1333-.23731-.12-.33862zm-.1333 4.31517-.2173-.224c.052-.1119.088-.2839.1573-.3226.1147-.0639.2853.216.2373.364-.0253.0746-.1013.1079-.1773.1839zm-1.1051-1.0891c-.0426-.2026-.0706-.3306-.0973-.4613.0777-.0521.1645-.0892.256-.1093.0306 0 .1026.196.0893.2253-.0715.1223-.1546.2374-.248.3439zm-.4292 3.9059c-.0094 0-.036-.0773-.0534-.1213.0493-.0418.1029-.078.16-.108.0133 0 .0413.072.0613.1106-.0522.0442-.1085.0835-.1679.1173zm-.3733-7.13996c-.1586-.28395-.1226-.47057.012-.60255.0347-.03466.1133.04132.172.06532l-.184.53324zm-.3533-2.39287c.071-.153.1576-.2982.2587-.43324l.2066.41992c-.0973.10131-.188.23861-.296.28394-.04.01733-.1826-.23595-.1693-.26661zm-.3266 8.89163c-.0253-.116-.0493-.2306-.0733-.344.0613-.0146.1333-.0666.18-.0306.0466.036.0453.1666.0653.2546zm-.1119 6.6653c-.024-.0719-.08-.1786-.0654-.2106.0294-.0653.096-.0893.1467-.1333.0386.0613.0786.1213.1173.1813l-.1973.1587zm-.2187-14.04522c.036-.11331.1333-.1813.244-.3306.0948.12507.1774.259.2466.39992-.0213.10455-.0777.19865-.16.26661-.0469.01414-.0968.01507-.1442.00269s-.0905-.03758-.1245-.07284c-.0341-.03527-.0577-.07923-.0684-.12705-.0106-.04783-.0079-.09767.0079-.14406zm-.4679 1.62632c-.0715-.1267-.1292-.26078-.1719-.39989.0576-.12704.1501-.23517.2666-.31193.036-.01733.1813.23995.1666.27861-.0721.15369-.1615.29861-.2666.43191zm27.8013 12.5229c-.1149-1.8036-.085-3.6134.0893-5.4123.0587-2.1329.5052-4.2658.3853-6.3987-.0467-.8412-.6239-1.67036-.4919-2.52086.0501-.8408-.0213-1.68444-.212-2.50485-.0893-.6852-1.1998-1.18243-1.1838-1.88362.04-1.733-.3892-1.5357-1.5117-1.61435-1.4757-.10265-2.1782-.01733-3.6593 0-.9984.01199-2.1329-1.956969-3.1247-1.86632-1.0665.090649-2.1329.037332-3.1994.026667-1.3051-.014663-2.6101-.050656-3.9152-.074651-.8585-.014664-1.7183-.050663-2.5768-.026668-1.7557.049324-3.5114.158653-5.267.19198-.9972.018663-1.9996-.083983-2.9928-.094647-1.0331-.011998-2.0662-.030669-3.0967.050649-.71985.057322-1.43307.291946-2.15159.419922-1.04667.236198-2.10793.402308-3.17671.497238-.81051.03466-.52657 1.00512-1.33308.87981-.59721-.09198-.25328-2.218221-.77585-1.946274-.42467.893344-.71401 1.844914-.85849 2.823444-.05599 1.3784-.68921 3.61396-.74253 4.99236-.02138.41698-.02138.83479 0 1.25177.1333 2.1769-.569226 1.8756-.683871 4.0552-.018663.3693.007999 3.3753 0 3.7459-.025328 1.2225.066654 1.7784 0 2.9968-.089315 1.6423-.418569 6.4334-.325254 8.0944.062655 1.1105.995795 4.5738 1.009125 5.6923 0 .2159.73453 1.321.74253 1.537.36644.4213.65692.903.85849 1.4237.62122 1.7597-.33326.9132.77585 1.1438.12821.0285.24018.106.31196.2159 1.72233.084 3.44332.1054 5.16431.0827.47725-.0427.95581-.0667 1.43301-.1133.04 0 .0867.0373.1414.0853.7478-.02 1.4943-.0453 2.2409-.08.0866-.1186.1786-.2319.2666-.3493.1384.008.274.0419.3999.1.1232.1086.2817.1684.4459.1684s.3227-.0598.4459-.1684c.1387-.1175.3129-.1851.4946-.1919.8968-.1312 1.811-.0772 2.6861.1586l.5333-.0386s.008-.0001.0106-.0081c.0938-.1371.2257-.2437.3795-.3065.1539-.0628.3227-.0791.4857-.0467.3093.0106.6199 0 .9331-.0187.1247-.0165.2515-.0077.3726.026.1212.0337.2344.0915.3326.17l1.4291-.108c.1418-.0498.2909-.0759.4412-.0773 1.4958-.084 2.9901-.2666 4.4858-.2666 1.945-.1227 3.8913-.2187 5.8389-.2547 2.4982-.0453 5.3456.8905 7.7971-.1253.2985-.6868.4515-1.428.4493-2.1769.0653-1.6343.6026-10.6179.3853-12.2496"
            :fill="'url(#' + name + ')'"
          />
        </svg>
      </div>
    </label>
    <input
      :id="'farbkachel-' + name"
      type="checkbox"
      :checked="ausgewaehlt"
      @change="$emit('change', $event.target.checked)"
    />
  </div>
</template>

<script setup lang="ts">
defineProps<{
  name: string;
  lesbarerName: string;
  ausgewaehlt: boolean;
}>();

defineEmits<{
  (e: 'change', value: boolean): void;
}>();

type Farbdefinition = {
  stopColor: string;
  offset: string;
};

type Farbe = {
  name: string;
  farbdefinition: Farbdefinition[];
};

const colorMap = new Map<string, Farbe>()
  .set('blau', {
    name: 'blau',
    farbdefinition: [
      { stopColor: '#ABD6EF', offset: '7.64%' },
      { stopColor: '#5EB7ED', offset: '44.17%' },
      { stopColor: '#054A75', offset: '95.88%' },
    ],
  })
  .set('grün', {
    name: 'grün',
    farbdefinition: [
      { stopColor: '#A9E679', offset: '7.64%' },
      { stopColor: '#57BE07', offset: '44.17%' },
      { stopColor: '#25410E', offset: '95.88%' },
    ],
  })
  .set('gelb', {
    name: 'gelb',
    farbdefinition: [
      { stopColor: '#FFDE26', offset: '7.64%' },
      { stopColor: '#F8D422', offset: '44.17%' },
      { stopColor: '#DB7600', offset: '95.88%' },
    ],
  })
  .set('orange', {
    name: 'orange',
    farbdefinition: [
      { stopColor: '#ff9300', offset: '7.64%' },
      { stopColor: '#d54100', offset: '95.88%' },
    ],
  })
  .set('rot', {
    name: 'rot',
    farbdefinition: [
      { stopColor: '#eb0808', offset: '7.64%' },
      { stopColor: '#800000', offset: '95.88%' },
    ],
  })
  .set('rosa', {
    name: 'rosa',
    farbdefinition: [
      { stopColor: '#ffebea', offset: '7.64%' },
      { stopColor: '#ff7e7e', offset: '95.88%' },
    ],
  })
  .set('pink', {
    name: 'pink',
    farbdefinition: [
      { stopColor: '#FFD8E4', offset: '7.64%' },
      { stopColor: '#EF93E8', offset: '44.17%' },
      { stopColor: '#9435A0', offset: '95.88%' },
    ],
  })
  .set('lila', {
    name: 'lila',
    farbdefinition: [
      { stopColor: '#cc48ad', offset: '7.64%' },
      { stopColor: '#3e2237', offset: '95.88%' },
    ],
  })
  .set('weiss', {
    name: 'weiss',
    farbdefinition: [
      { stopColor: '#F4ECF0F2', offset: '7.64%' },
      { stopColor: '#F4ECF0F2', offset: '95.88%' },
    ],
  })
  .set('bunt', {
    name: 'bunt',
    farbdefinition: [
      { stopColor: '#FFBA00', offset: '12.57%' },
      { stopColor: '#AF0065', offset: '29.99%' },
      { stopColor: '#B56CDB', offset: '50.7%' },
      { stopColor: '#FB4C6E', offset: '70.65%' },
      { stopColor: '#FFFFFF', offset: '84.71%' },
      { stopColor: '#FF2974', offset: '96.75%' },
    ],
  });

const getFarbdefinition = (name: string): Farbdefinition[] => {
  const farbe = colorMap.get(name);
  return farbe ? farbe.farbdefinition : [];
};
</script>

<style lang="scss" scoped>
.erk_finden__filterwertkachel {
  &__label {
    @include font-Rubik-light(16);
    display: grid;
    text-align: center;
    cursor: pointer;
    grid-gap: 8px;
  }

  &__farbname {
    opacity: 0;
  }

  &__farbkachel {
    align-items: center;
    display: flex;
    justify-content: center;
    padding: 4px;
    border-radius: 6px;
    margin: 2px;
  }

  &--selected,
  &:active {
    .erk_finden__filterwertkachel__farbkachel {
      border: 2px solid $color-dark;
      margin: 0;
    }
  }

  &:focus {
    .erk_finden__filterwertkachel__farbkachel {
      border: 1px solid $color-dark;
      margin: 1px;
    }
  }

  &--selected,
  &:active,
  &:focus {
    .erk_finden__filterwertkachel__farbname {
      opacity: 1;
    }
  }

  @include hasHover {
    &:hover {
      .erk_finden__filterwertkachel__farbkachel {
        border: 1px solid $color-dark;
        margin: 1px;
      }

      .erk_finden__filterwertkachel__farbname {
        opacity: 1;
      }
    }
  }

  input {
    display: none;
  }
}
</style>
