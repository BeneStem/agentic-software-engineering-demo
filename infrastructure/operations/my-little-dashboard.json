{
  "displayName": "Erkunden - Finden - Dashboard - %environment%",
  "category": "CUSTOM",
  "mosaicLayout": {
    "columns": 12,
    "tiles": [
      {
        "height": 4,
        "widget": {
          "title": "Memory JVM",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": [
                        "resource.label.\"node_id\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/jvm/memory/used\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" resource.labels.project_id=\"%project_id%\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "yPos": 1
      },
      {
        "height": 4,
        "widget": {
          "title": "CPU JVM",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/process/cpu/usage\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" resource.labels.project_id=\"%project_id%\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "xPos": 6,
        "yPos": 1
      },
      {
        "height": 4,
        "widget": {
          "title": "Requests [Backend]",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "STACKED_AREA",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "apiSource": "DEFAULT_CLOUD",
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": [
                        "metric.label.\"status\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/http/server/requests/count\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" resource.label.\"project_id\"=\"%project_id%\" metric.label.\"uri\"!=monitoring.regex.full_match(\"/q/.*\")"
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "yPos": 5
      },
      {
        "height": 1,
        "widget": {
          "text": {
            "format": "RAW"
          },
          "title": "Projekt: %project_id%"
        },
        "width": 6,
        "xPos": 3
      },
      {
        "height": 4,
        "widget": {
          "title": "Finden Backend Request Times",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_MEAN",
                      "groupByFields": [
                        "resource.label.\"project_id\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/http/findenProdukteApi/requests/timer/p50\" resource.type=\"generic_node\" resource.labels.project_id=\"%project_id%\""
                  },
                  "unitOverride": "1"
                }
              },
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_MEAN",
                      "groupByFields": [
                        "resource.label.\"project_id\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/http/findenProdukteApi/requests/timer/p95\" resource.type=\"generic_node\" resource.labels.project_id=\"%project_id%\""
                  },
                  "unitOverride": "1"
                }
              },
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_MEAN",
                      "groupByFields": [
                        "resource.label.\"project_id\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/http/findenProdukteApi/requests/timer/p99\" resource.type=\"generic_node\" resource.labels.project_id=\"%project_id%\""
                  },
                  "unitOverride": "1"
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "xPos": 6,
        "yPos": 5
      },
      {
        "height": 4,
        "widget": {
          "title": "Requests [Frontend]",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "STACKED_AREA",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "apiSource": "DEFAULT_CLOUD",
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": [
                        "metric.label.\"status\""
                      ],
                      "perSeriesAligner": "ALIGN_SUM"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/opentelemetry/finden.ssr.responseCode\" resource.type=\"global\" resource.label.\"project_id\"=\"%project_id%\" metric.label.\"methodurl\"!=\"GET /health\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "yPos": 9
      },
      {
        "height": 4,
        "widget": {
          "title": "Response Times [Frontend]",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "legendTemplate": "${metric.labels.path} [p${metric.labels.percentile}]",
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "targetAxis": "Y1",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_MEAN",
                      "groupByFields": [
                        "metric.label.\"path\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/opentelemetry/finden.ssr.responseTime\" resource.type=\"global\" resource.labels.project_id=\"%project_id%\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "xPos": 6,
        "yPos": 9
      },
      {
        "height": 4,
        "widget": {
          "title": "Produkte in der Datenbank",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_MEAN",
                      "groupByFields": [
                        "resource.label.\"project_id\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/produkt/anzahl/gauge\" resource.type=\"generic_node\" resource.labels.project_id=\"%project_id%\""
                  },
                  "unitOverride": "1"
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "yPos": 13
      },
      {
        "height": 4,
        "widget": {
          "title": "Consumer Statistics",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "unitOverride": "1",
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/produktimport/counter\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" metric.label.\"result\"=\"success\" resource.labels.project_id=\"%project_id%\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_SUM",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": []
                    }
                  }
                }
              },
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "unitOverride": "1",
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/produktimport/counter\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" metric.label.\"result\"=\"attempt\" resource.labels.project_id=\"%project_id%\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_SUM",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": []
                    }
                  }
                }
              },
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "unitOverride": "1",
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/produktimport/counter\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" metric.label.\"result\"=\"business-error\" resource.labels.project_id=\"%project_id%\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_SUM",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": []
                    }
                  }
                }
              },
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "unitOverride": "1",
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/produktimport/counter\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" metric.label.\"result\"=\"technical-error\" resource.labels.project_id=\"%project_id%\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_SUM",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": []
                    }
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "xPos": 6,
        "yPos": 13
      },
      {
        "height": 4,
        "widget": {
          "title": "Ladezeiten Frontend",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "LINE",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": [
                        "metric.label.\"path\"",
                        "metric.label.\"percentile\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/opentelemetry/finden.ssr.responseTime\" resource.type=\"global\" resource.labels.project_id=\"%project_id%\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "yPos": 17
      },
      {
        "height": 4,
        "widget": {
          "title": "Produktliste Views",
          "xyChart": {
            "chartOptions": {
              "mode": "COLOR"
            },
            "dataSets": [
              {
                "minAlignmentPeriod": "60s",
                "plotType": "STACKED_AREA",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "crossSeriesReducer": "REDUCE_SUM",
                      "groupByFields": [
                        "metric.label.\"status\""
                      ],
                      "perSeriesAligner": "ALIGN_MEAN"
                    },
                    "filter": "metric.type=\"custom.googleapis.com/http/findenProdukteApi/requests/count\" resource.type=\"generic_node\" resource.label.\"namespace\"=\"finden-backend\" resource.labels.project_id=\"%project_id%\""
                  }
                }
              }
            ],
            "timeshiftDuration": "0s",
            "yAxis": {
              "label": "y1Axis",
              "scale": "LINEAR"
            }
          }
        },
        "width": 6,
        "xPos": 6,
        "yPos": 17
      }
    ]
  }
}
